<!DOCTYPE html>
<meta charset="UTF-8">
<title>Find music</title>
<meta name="viewport" content="width=device-width,user-scalable=no">
<style>
body,h1,form{margin:0}html{font:1em "BlinkMacSystemFont","Microsoft YaHei","å¾®è½¯é›…é»‘","WenQuanYi Micro Hei",sans-serif;text-align:center}input{font:inherit}input:focus{outline:none}::selection{background:rgba(0,149,255,0.1)}a{text-decoration:none;color:#58a4dd}h1{font-size:3.5em;padding:1.5em 0;color:#0bb1f5;font-weight:200}h1:before{content:'ğŸš '}#è¾“å…¥æ¡† input{ime-mode:inactive;ime-mode:disabled;border:none;font-size:1.4em;padding:.5em .7em;max-width:30em;width:100%;background:#F8F8F8;box-shadow:0 0 0 1px #DDD inset,0 1px 2px rgba(0,0,0,.2);transition:box-shadow .3s ease;border-radius:4px;text-align:center;-webkit-appearance:none}#è¾“å…¥æ¡† input:focus{box-shadow:0 0 0 2px #58a4dd inset,0 3px 3px rgba(0,0,0,.2) inset}#ç»“æœ{padding:2em 0}#ç»“æœ a{display:block;padding:.5em;font-size:1.4em}#ç»“æœ a:hover{background:rgba(88,164,221,.1)}.text-banner{font-size:1.4em;line-height:4em;color:#DDD}footer{font-size:1.4em;line-height:6em;color:#DDD}@media (max-width:600px){h1{padding:.5em 0}h1:before{display:none}#è¾“å…¥æ¡†{padding:0 1em}}a{color:red}
</style>
<h1>music finder</h1>
<form id="è¾“å…¥æ¡†" autocomplete="off">
	<input type="search" name="text" placeholder="é”®å…¥å…³é”®å­—ã€å›è½¦ç›´è¾¾">
</form>
<div id="ç»“æœ"></div>
<script>
(function(s){'use strict';function extend(a,b){for(var c in b){if(b.hasOwnProperty(c)){a[c]=b[c]}}return a}function distance(a,b,c){var m=0;var d={caseSensitive:true};var e=extend(d,c);var i;var j;if(a.length===0||b.length===0){return 0}if(!e.caseSensitive){a=a.toUpperCase();b=b.toUpperCase()}if(a===b){return 1}var f=(Math.floor(Math.max(a.length,b.length)/2))-1;var g=new Array(a.length);var h=new Array(b.length);for(i=0;i<a.length;i++){var n=(i>=f)?i-f:0;var o=(i+f<=(b.length-1))?(i+f):(b.length-1);for(j=n;j<=o;j++){if(g[i]!==true&&h[j]!==true&&a[i]===b[j]){++m;g[i]=h[j]=true;break}}}if(m===0){return 0}var k=0;var q=0;for(i=0;i<a.length;i++){if(g[i]===true){for(j=k;j<b.length;j++){if(h[j]===true){k=j+1;break}}if(a[i]!==b[j]){++q}}}var r=(m/a.length+m/b.length+(m-(q/2))/m)/3;var l=0;var p=0.1;if(r>0.7){while(a[l]===b[l]&&l<4){++l}r=r+l*p*(1-r)}return r}if(typeof define==='function'&&define.amd){define([],function(){return distance})}else if(typeof exports==='object'){module.exports=distance}else{s.distance=distance}})(this);
</script>

<script>
var sites={};var x=new XMLHttpRequest();x.open('GET','data.json',1);x.onload=function(r){r=JSON.parse(x.response);for(var a in r){r[a].domain=r[a].href.replace(/^https?:\/\//,'').replace(/^www\./,'').replace(/\/.*$/,'');sites[a+' '+r[a].title]=r[a]}}x.send();varåˆ¤æ–­é‡å¤=function(a,o){for(var i=0,l=a.length;i<l;i++){if(a[i].domain==o.domain){return true}}return false},æœ€è¿‘è¾“å…¥ç»“æœ=[],å†å²è·³è½¬ç»“æœæ•°é‡=5,å±•ç¤ºæœ€è¿‘è¾“å…¥çš„å…³é”®å­—=function(){ç»“æœ.innerHTML=åˆ—è¡¨è½¬æ¢(æœ€è¿‘è¾“å…¥ç»“æœ)},åˆ—è¡¨è½¬æ¢=function(r){return r.map(function(o){return'<a href="'+(o.href.match(/^http/)?'':'http://')+o.href+'">'+o.domain+' - '+o.title+'</a>'}).join('')},æœ€ç»ˆå±•ç¤ºåœ°å€åˆ—è¡¨=[],æœ€ç»ˆå±•ç¤ºåœ°å€åˆ—è¡¨æœ€å¤§æ•°é‡é™åˆ¶=30,æ ¹æ®å…³é”®å­—æœç´¢å¹¶å±•ç¤º=function(c){varä¸­æ–‡æ¨¡å¼=!!c.match(/[ä¸€-é¾¥]/);æœ€ç»ˆå±•ç¤ºåœ°å€åˆ—è¡¨=[];for(var d in sites){sites[d].é¡ºåº=distance(ä¸­æ–‡æ¨¡å¼?sites[d].title:d,c);æœ€ç»ˆå±•ç¤ºåœ°å€åˆ—è¡¨.push(sites[d])}æœ€ç»ˆå±•ç¤ºåœ°å€åˆ—è¡¨.sort(function(a,b){return b.é¡ºåº-a.é¡ºåº});if(æœ€ç»ˆå±•ç¤ºåœ°å€åˆ—è¡¨.length>æœ€ç»ˆå±•ç¤ºåœ°å€åˆ—è¡¨æœ€å¤§æ•°é‡é™åˆ¶)æœ€ç»ˆå±•ç¤ºåœ°å€åˆ—è¡¨.length=æœ€ç»ˆå±•ç¤ºåœ°å€åˆ—è¡¨æœ€å¤§æ•°é‡é™åˆ¶;ç»“æœ.innerHTML=åˆ—è¡¨è½¬æ¢(æœ€ç»ˆå±•ç¤ºåœ°å€åˆ—è¡¨)};è¾“å…¥æ¡†.onsubmit=function(e){if(e)e.preventDefault();var b=è¾“å…¥æ¡†.text.value.trim();b=b.toLowerCase();if(b.match(/^https?:/)){location.href=b;return}if(!b.match(/:/)&&b.match(/^(www|blog|bbs)|\.(com|net|org)$/)){location.href='http://'+b;return}æ ¹æ®å…³é”®å­—æœç´¢å¹¶å±•ç¤º(b);var a=ç»“æœ.querySelector('a');if(a){if(æœ€ç»ˆå±•ç¤ºåœ°å€åˆ—è¡¨[0]&&!åˆ¤æ–­é‡å¤(æœ€è¿‘è¾“å…¥ç»“æœ,æœ€ç»ˆå±•ç¤ºåœ°å€åˆ—è¡¨[0])){æœ€è¿‘è¾“å…¥ç»“æœ.unshift(æœ€ç»ˆå±•ç¤ºåœ°å€åˆ—è¡¨[0]);if(æœ€è¿‘è¾“å…¥ç»“æœ.length>å†å²è·³è½¬ç»“æœæ•°é‡){æœ€è¿‘è¾“å…¥ç»“æœ.length=å†å²è·³è½¬ç»“æœæ•°é‡}if(window.localStorage){localStorage.å†å²æœç´¢=JSON.stringify(æœ€è¿‘è¾“å…¥ç»“æœ)}}location.href=a.href}};try{æœ€è¿‘è¾“å…¥ç»“æœ=JSON.parse(localStorage.å†å²æœç´¢)}catch(e){æœ€è¿‘è¾“å…¥ç»“æœ=[]}å±•ç¤ºæœ€è¿‘è¾“å…¥çš„å…³é”®å­—();è¾“å…¥æ¡†.text.oninput=function(){var a=è¾“å…¥æ¡†.text.value.trim();a=a.toLowerCase();clearTimeout(ç»“æœ.T);if(!a){å±•ç¤ºæœ€è¿‘è¾“å…¥çš„å…³é”®å­—();return}ç»“æœ.T=setTimeout(function(){æ ¹æ®å…³é”®å­—æœç´¢å¹¶å±•ç¤º(a)},20)}è¾“å…¥æ¡†.text.focus();document.body.onclick=function(e){var a=e.target,action=a.getAttribute('action');switch(action){case'æœç´¢':var b=a.innerHTML;è¾“å…¥æ¡†.text.focus();è¾“å…¥æ¡†.text.value=b;è¾“å…¥æ¡†.text.oninput();break}}
</script>
